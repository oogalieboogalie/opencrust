   Compiling opencrust-agents v0.1.0 (D:\Git Projects\opencrust\crates\opencrust-agents)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 7.40s
     Running unittests src\lib.rs (target\debug\deps\opencrust_agents-dcd5e524e9975607.exe)

running 36 tests
test anthropic::tests::converts_tool_result_message ... ok
test anthropic::tests::serializes_request_correctly ... ok
test anthropic::tests::deserializes_text_response ... ok
test embeddings::tests::parses_float_embeddings_payload ... ok
test openai::tests::deserializes_text_response ... ok
test anthropic::tests::builds_request_with_default_model ... ok
test anthropic::tests::builds_request_with_explicit_model ... ok
test openai::tests::builds_request_with_default_model ... ok
test embeddings::tests::endpoint_is_normalized_without_double_slashes ... ok
test anthropic::tests::endpoint_strips_trailing_slash ... ok
test anthropic::tests::deserializes_tool_use_response ... ok
test openai::tests::deserializes_tool_call_response ... ok
test openai::tests::converts_tool_result_to_tool_messages ... ok
test ollama::tests::request_serialization_includes_options ... ok
test openai::tests::serializes_request_correctly ... ok
test openai::tests::endpoint_strips_trailing_slash ... ok
test anthropic::tests::request_includes_tools_when_provided ... ok
test embeddings::tests::builds_expected_request_shape ... ok
test openai::tests::request_includes_tools_when_provided ... ok
test ollama::tests::request_serialization_includes_tools ... ok
test tools::bash_tool::tests::returns_error_on_missing_command ... ok
test tools::file_write_tool::tests::returns_error_on_missing_params ... ok
test tools::file_read_tool::tests::returns_error_on_missing_param ... ok
test tools::file_read_tool::tests::returns_error_for_missing_file ... ok
test tools::tests::success_helper_sets_non_error_state ... ok
test tools::tests::error_helper_sets_error_state ... ok
test tools::web_fetch_tool::tests::blocks_domains ... ok
test ollama::tests::list_models_works ... ok
test ollama::tests::stream_complete_works ... ok
test ollama::tests::complete_works ... ok
test tools::file_read_tool::tests::reads_existing_file ... ok
test tools::file_write_tool::tests::writes_file_successfully ... ok
test tools::web_fetch_tool::tests::returns_error_on_missing_url ... ok
test tools::bash_tool::tests::executes_simple_command ... FAILED
test tools::bash_tool::tests::captures_stderr ... FAILED
test tools::bash_tool::tests::reports_error_on_failing_command ... ok

failures:

---- tools::bash_tool::tests::executes_simple_command stdout ----

thread 'tools::bash_tool::tests::executes_simple_command' panicked at crates\opencrust-agents\src\tools\bash_tool.rs:116:9:
assertion failed: !output.is_error
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- tools::bash_tool::tests::captures_stderr stdout ----

thread 'tools::bash_tool::tests::captures_stderr' panicked at crates\opencrust-agents\src\tools\bash_tool.rs:144:9:
assertion failed: output.content.contains("err")


failures:
    tools::bash_tool::tests::captures_stderr
    tools::bash_tool::tests::executes_simple_command

test result: FAILED. 34 passed; 2 failed; 0 ignored; 0 measured; 0 filtered out; finished in 1.35s

error: test failed, to rerun pass `-p opencrust-agents --lib`
